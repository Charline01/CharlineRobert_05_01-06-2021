<!DOCTYPE html>
<html>

  <head>
    <title>Orinoco - Boutique en ligne de produits maison & déco</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width" />
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://kit.fontawesome.com/6aaac548d6.js" crossorigin="anonymous"></script>
<link href="style.css" rel="stylesheet">
<link rel="shortcut icon" type="image/x-icon" href="../images/icone.png" />
		
</head>

        <body>

          <header>
            <h1 id="logo-orinoco">
                <div id="logo">
                    
                </div>
                Mon panier Orinoco
                
            </h1>

            <nav>
                <div id="menu">
                    <p><a href="index.html">Accueil</a></p>
                    <p><a href="apropos.html">A propos </a></p>
                    <p><a href="panier.html">Panier</a></p>
                    <p><a href="contact.html">Contact</a></p>
                </div>

            </nav>

           

        </header>

        <section>
        </section>
        

        

        <div class="RacpitulatifPrix">
            <div class="CartPage-sidebar">
                <!-- Ticket panier -->
                <div class="CartPage-ticket">
                  
          
                
          
                  <!-- Ligne Boite cadeau -->
                  <div class="CartPage-ticket-item CartPage-ticket-item--giftBox">
                    <span class="CartPage-ticket-itemLabel">
                        <i class="fas fa-gift"></i> Boîte cadeau
                    </span>
                    <span class="CartPage-ticket-itemValue">
                      <input type="checkbox" class="CartPage-ticket-input" />
                     
                    </span>
                  </div>
          
                  <!-- Livraison par defaut -->
                  <div class="CartPage-ticket-item CartPage-ticket-item--delivery">
                    <span class="CartPage-ticket-itemLabel">
                      Options de livraison
                      <span class="CartPage-ticket-tooltip">i</span>
                    </span>
                    <!-- <span class="CartPage-ticket-itemValue">
                      19,90 €
                    </span> -->
                  </div>
          
                  <!-- Options choix de livraison -->
                  <div class="CartPage-ticket-item CartPage-ticket-item--deliveryOptions">
                    <!-- <span class="CartPage-ticket-itemLabel">
                      Options de livraison
                      <span class="CartPage-ticket-tooltip">i</span>
                    </span> -->
                    <ul class="CartPage-ticket-deliveryList">
                      <li class="CartPage-ticket-deliveryItem">
                        <input type="radio" id="deliveryOption1" name="deliveryOption" class="CartPage-ticket-deliveryItem-input" checked />
                        <label for="deliveryOption1" class="CartPage-ticket-deliveryItem-label">
                          <i class="fas fa-store"></i>
                          Retrait en magasin
                        </label>
                        <!-- <span class="CartPage-ticket-deliveryItem-value">Gratuit</span> -->
                      </li>
                      <li class="CartPage-ticket-deliveryItem">
                        <input type="radio" id="deliveryOption2" name="deliveryOption" class="CartPage-ticket-deliveryItem-input" />
                        <label for="deliveryOption2" class="CartPage-ticket-deliveryItem-label">
                          <i class="fas fa-map-pin"></i>
                          Livraison en Point Relais
                        </label>
                        <!-- <span class="CartPage-ticket-deliveryItem-value">3,90 €</span> -->
                      </li>
                      <li class="CartPage-ticket-deliveryItem">
                        <input type="radio" id="deliveryOption3" name="deliveryOption" class="CartPage-ticket-deliveryItem-input" />
                        <label for="deliveryOption3" class="CartPage-ticket-deliveryItem-label">
                          <i class="fas fa-house-user"></i>
                          Livraison Colissimo à domicile
                        </label>
                        <!-- <span class="CartPage-ticket-deliveryItem-value">3,90 €</span> -->
                      </li>
                    </ul>
                  </div>
          
                  
          
                  <!-- Pied de ticket -->
                  <div class="CartPage-ticket-footer">
                    <!-- Ligne Total panier -->
                    <div class="CartPage-ticket-item CartPage-ticket-item--totalCart">
                      <span class="CartPage-ticket-itemLabel">
                        Total
                        <span class="CartPage-ticket-itemLabel--small">(TVA incluse)</span>
                        
                        <span class="CartPage-ticket-itemValue TotalArticle">
                          <span id="prixTotal"></span>
                          <script>
                              document.getElementById("prixTotal").textContent = localStorage.getItem('total');
                          </script>
                          €
                        </span>
            
                    </div>

        

                    
                  

                    


                                        
          
                    <!-- Bouton validation panier -->
                   <a href="commande.html"><button class="CartPage-ticket-cartSubmit"> 
                                <span class="btn_checked">
                                    <i class="fas fa-check-circle"></i>
                                </span>
            
                                Je valide mon panier</button></a>
                                <a href ="index.html"> <button class ="ViderPanier" onclick="(function(){
                    if (confirm('Etes-vous sur de vouloir vider votre panier ?')) ViderPanier();
                  
                    })()"> 
                <i class="far fa-trash-alt"></i> Vider mon panier
                </button>
                   
                </a>
          
                </div>
          
                 </div>

                <div>
                    </div>


            </div>

        
        </div>

            <script>
            
                    
                
                    var header = document.querySelector('header');
                    var section = document.querySelector('section');
                    var panier = JSON.parse(localStorage.getItem("panier"));

                    

                   if (panier.lenght==0){
                       section.innerHTML = "Panier vide";

                   }

                panier.forEach(id => {
              chercherapi("http://127.0.0.1:3000/api/teddies/" + id);
                });


                function totalArticlePanier(){
                  var totalPanier = document.querySelector('TotalArticle');
                  
                }

        
            

            function chercherapi(requestURL) {

                    var request = new XMLHttpRequest();

                    request.open('GET', requestURL);

                    request.responseType = 'json';
                    request.send();

                    request.onload = function() {
                        var teddies = request.response;
                        showTeddies(teddies);
                        }
            }




             function showTeddies(teddies) {
               

                var myArticle = document.createElement('article');
                var myH2 = document.createElement('h2');
                var myPara1 = document.createElement('p');
                var myPara2 = document.createElement('p');
                var myImage = document.createElement('img');
                var boutonSuppr = document.createElement ('div');
                

                myH2.textContent = teddies.name;
                myPara1.textContent = 'Prix : ' + teddies.price/100 + ' €';
                myPara2.textContent = 'Description : ' + teddies.description;
                myImage.src = teddies.imageUrl;
                boutonSuppr.textContent = "❌ Supprimer l'article";
                boutonSuppr.classList.add("boutonSuppr");

                
                myArticle.appendChild(myH2);
                myArticle.appendChild(myPara1);
                myArticle.appendChild(myPara2);
                myArticle.appendChild(myImage);
                myArticle.appendChild(boutonSuppr);

               
                section.appendChild(myArticle);
            
        
                
                boutonSuppr.addEventListener("click", function(){
                  var succes = supprimerPanier(teddies._id, teddies.price/100);
                event.preventDefault();
                if (succes) alert("Ce produit a été supprimer du panier");
                window.location.href = "panier.html";
                });
        
    }


              function supprimerPanier (id, prix){
                

                var panier = JSON.parse(localStorage.getItem('panier'));
                let i = 0;
                var trouver = false;

                while(i < panier.length && trouver == false) {
                    if (id == panier[i]){
                      if (confirm("Etes-vous sûr de vouloir supprimer cet article référence n° " + id + " ?")){
                        panier.splice(i,1);
                        localStorage.setItem('panier', JSON.stringify(panier));

                        var total = parseInt(localStorage.getItem('total')) - parseInt(prix);
                        localStorage.setItem('total', total);
                      }
                      trouver = true;
                    }
                    else i++;
                  }
                return trouver;

                }

                function ViderPanier() {
                  localStorage.setItem('panier',JSON.stringify([]));
                    localStorage.setItem('total', 0);
                    window.location = 'panier.html';
                }


              function monBoutonPanier(articleId){
                let listFavorites = getFavorites();
                listFavorites.push(articleId);
                saveFavorites(listFavorites);
              }

              function removeFavorites(articleId){
                  let listFavorites = getFavorites();
                  listFavorites = listFavorites.filter(favorites => favorites.articleId);
                  saveFavorites(listFavorites);
              }

              function getFavorites(){
                let listFavorites = localStorage.getItem("listFavorites");
                if(listFavorites == null){
                  return [];
                }else{
                  return JSON.parse(listFavorites);
                }
              }

              function getFavorites(){
                  return getFavorites().map(favorites => favorites.articleId);
              }

              function saveFavorites(listFavorites){
                localStorage.setItem("listFavorites",JSON.stringify(listFavorites));
              }



            </script>

<footer>
  <div class="footer-gray">
  <div class="footer-custom">
      <div class="footer-lists">
      <div class="footer-list-wrap">
          
          </ul>
              <h6 class="ftr-hdr">International</h6>
              <ul class="ftr-links-sub">
              <li><a href="#" rel="nofollow">France</a></li>
              <li><a href="#" rel="nofollow">United Kingdom</a></li>
          </ul>
      </div>
      <!--/.footer-list-wrap-->
      <div class="footer-list-wrap">
          <h6 class="ftr-hdr">Customer Service</h6>
          <ul class="ftr-links-sub">
          <li><a href="contact.html" rel="nofollow">Contact Us</a></li>
          <li><a href="#" rel="nofollow">Ordering</a></li>
          <li><a href="#" rel="nofollow">Shipping &amp; Delivery</a></li>
          <li><a href="#" rel="nofollow">Returns</a></li>
          <li><a href="#" rel="nofollow">International Orders</a></li>
          <li><a href="#" rel="nofollow">Gift Cards</a></li>
          <li><a href="#" rel="nofollow">FAQs</a></li>
          </ul>
      </div>
      <div class="footer-list-wrap">
          <h6 class="ftr-hdr">About Art.com</h6>
          <ul class="ftr-links-sub">
          <li><a href="#" rel="nofollow">Our Company</a></li>
          <li><a href="#" rel="nofollow">Careers</a></li>
          <li><a href="#" rel="nofollow">Artist Rising</a></li>
          <li><a href="#" rel="nofollow">Business &amp; Trade Sales</a></li>
          <li><a href="#" rel="nofollow">Affiliate Program</a></li>
          <li><a href="#" rel="nofollow"><strong>Shop Our Catalog</strong></a></li>
          </ul>
      </div>
      <!--/.footer-list-wrap-->
      <div class="footer-list-wrap">
          <h6 class="ftr-hdr">My Account</h6>
          <ul class="ftr-links-sub">
              <li class="ftr-Login"><span class="link login-trigger">Access My Account</span></li>
              <li><span class="link" onclick="link('/asp/secure/your_account/track_orders-asp/_/posters.htm')">Track My Order</span></li>
              <li class="ftr-Login"><span class="link ftr-access-my-account">Access My Account</span></li>
              <li><span class="link" onclick="window.location.href = getProfileKey() + '?pagetype=oh';">Track My Order</span></li>
         
          </ul>
      </div>
      <!--/.footer-list-wrap-->
      </div>
      <!--/.footer-lists-->
      <div class="footer-email">
      <h6 class="ftr-hdr">Sign up for exclusive offers and inspiration</h6>
      <div id="ftr-email" class="ftr-email-form">
          <form id="ftrEmailForm" method="post" action="http://em.art.com/pub/rf">
          <div class="error">Please enter a valid email address</div>
          <input type="text" name="email_address_" id="ftrEmailInput" class="input" placeholder="Enter email address" />
          <!--
              -->
          <input type="submit" class="button" value="ENVOyer" />
          <input type="hidden" name="country_iso2" value="">
          <input type="hidden" name="language_iso2" value="en">
          <input type="hidden" name="site_domain" value="art.com">
          <input type="hidden" name="email_acq_source" value="01-000001">
          <input type="hidden" name="email_acq_date" value="" id="ftr-email-date">
          <input type="hidden" name="brand_id" value="ART">
          <input type="hidden" name="_ri_" value="X0Gzc2X%3DWQpglLjHJlYQGnp51yrMf2qXdC9tjU8pzgMtwfYzaVwjpnpgHlpgneHmgJoXX0Gzc2X%3DWQpglLjHJlYQGnyLSq2fzdkuzdzglHMsUhgeNzaSgkk">
          </form>
      </div>
      <!--/.ftr-email-form-->
      <div class="ftr-email-privacy-policy"></div>
      </div>
      <!--/.footer-email-->
      <div class="footer-social">
      <h6 class="ftr-hdr">Follow Us</h6>
      <ul>
          <li>
          <a href="#" title="Facebook" onclick="_gaq.push(['_trackSocial', 'Facebook', 'Follow', 'Footer', 'undefined', 'True']);">
              <img width="24" height="24" alt="Like us on Facebook" src="http://cache1.artprintimages.com/images/jump_pages/rebrand/footer/fb.png">
          </a>
          </li>
          <li>
          <a href="#" title="Google+" onclick="_gaq.push(['_trackSocial', 'GooglePlus', 'Follow', 'Footer', 'undefined', 'True']);">
              <img width="24" height="24" alt="Follow us on Google+" src="http://cache1.artprintimages.com/images/jump_pages/rebrand/footer/gplus.png">
          </a>
          </li>
          <li>
          <a href="#" target="_blank">
              <img width="24" height="24" alt="Follow us on Pinterest" src="http://cache1.artprintimages.com/images/jump_pages/rebrand/footer/pin-badge.png">
          </a>
          </li>
          <li>
          <a target="#">
              <img width="24" height="24" alt="Follow us on Instagram" src="http://cache1.artprintimages.com/images/jump_pages/rebrand/footer/instagram-badge.png">
          </a>
          </li>
          <li>
          <a href="#" title="Twitter" onclick="_gaq.push(['_trackSocial', 'Twitter', 'Follow', 'Footer', 'undefined', 'True']);">
              <img width="67" alt="Follow us on Twitter" src="http://cache1.artprintimages.com/images/jump_pages/rebrand/footer/twitter.png">
          </a>
          </li>
      </ul>
      </div>
      <!--/.footer-social-->
      <div class="footer-legal">
      <div>&copy; All Rights Reserved. </div>
          <div>
              <a href="#" rel="nofollow">Privacy Policy</a> | <a href="#" rel="nofollow">Terms of Use</a> | <a href="#" rel="nofollow">Terms of Sale</a>
          </div>  
      

      </div>
      <!--/.footer-legal-->
      <div class="footer-payment">
      <ul>
          
          
          
      </ul>
      </div>
      <!--/.footer-payment-->
  </div>
  <!--/.footer-custom-->
  </div>
  <!--/.footer-gray-->
</footer>

            </body>
  </html>
